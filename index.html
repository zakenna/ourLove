<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>schedule</title>
    <link rel="stylesheet" href="mainPage.css">
    <!-- FullCalendar CSS -->
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css" rel="stylesheet" />

    <!-- FullCalendar JS -->
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>

</head>
<body>
    <div class="banner">
        <a class="nav-item home" href="index.html">
            <span class="icon">ğŸ </span>
            <span class="text">ë©”ì¸í˜ì´ì§€</span>
        </a>
        <a class="nav-item schedule" href="index.html">
            <span class="icon">ğŸ“…</span>
            <span class="text">ìŠ¤ì¼€ì¤„</span>
        </a>
        <a class="nav-item album" href="album.html">
            <span class="icon">ğŸ“¸</span>
            <span class="text">ì•¨ë²”</span>
        </a>
        <a class="nav-item playlist" href="playlist.html">
            <span class="icon">ğŸµ</span>
            <span class="text">í”Œë ˆì´ë¦¬ìŠ¤íŠ¸</span>
        </a>
    </div>

    <!-- 2. ë‹¬ë ¥ì„ ë³´ì—¬ì¤„ ì˜ì—­ ë§Œë“¤ê¸° -->
    <div id='Calendar'> 
        <input type="text" id="plan" placeholder="í• ì¼ì„ ì ì–´ì£¼ì„¸ìš”.">
        <input type="date" id="date">
        <button onclick="send()">ë“±ë¡</button>
        <button onclick="remove()">ì‚­ì œ</button>
        <hr>
    </div>

    <script>
    let calendar;

    document.addEventListener('DOMContentLoaded', function () {
        const calendarEl = document.getElementById('Calendar');
        calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'dayGridMonth',
            events: []
        });
        calendar.render();
    });

    // ì¼ì • ì¶”ê°€ í•¨ìˆ˜
    function send() {
        const plan = document.getElementById('plan').value;
        const date = document.getElementById('date').value;
        if (!plan || !date) {
            alert("ê³„íšê³¼ ë‚ ì§œë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return;
        }

        // FullCalendarì— ì´ë²¤íŠ¸ ì¶”ê°€
        calendar.addEvent({
            title: plan,
            start: date
        });

        // ì…ë ¥ì°½ ì´ˆê¸°í™”
        document.getElementById('plan').value = '';
        document.getElementById('date').value = '';
    }

    // ì¼ì • ì‚­ì œ í•¨ìˆ˜
    function remove() {
        const plan = document.getElementById('plan').value.trim();
        const date = document.getElementById('date').value;
        const events = calendar.getEvents(); // í˜„ì¬ ë“±ë¡ëœ ì´ë²¤íŠ¸ ì „ì²´

        if (!plan || !date) {
            alert("ì‚­ì œí•  ê³„íšê³¼ ë‚ ì§œë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return;
        }

        const targetDate = new Date(date);

        // ì œëª©ê³¼ ë‚ ì§œê°€ ëª¨ë‘ ì¼ì¹˜í•˜ëŠ” ì´ë²¤íŠ¸ë¥¼ ì°¾ì•„ì„œ ì‚­ì œ
        const target = events.find(event => {
            const eventDate = new Date(event.start);
            return event.title === plan &&
                   eventDate.getFullYear() === targetDate.getFullYear() &&
                   eventDate.getMonth() === targetDate.getMonth() &&
                   eventDate.getDate() === targetDate.getDate();
        });

        if (target) {
            target.remove(); // ì‚­ì œ
            alert("ì´ë²¤íŠ¸ë¥¼ ì‚­ì œí–ˆì–´ìš”.");
        } else {
            alert("ì¼ì¹˜í•˜ëŠ” ì´ë²¤íŠ¸ê°€ ì—†ì–´ìš”.");
        }

        // ì…ë ¥ì°½ ì´ˆê¸°í™”
        document.getElementById('plan').value = '';
        document.getElementById('date').value = '';
    }
</script>

</body>
</html>